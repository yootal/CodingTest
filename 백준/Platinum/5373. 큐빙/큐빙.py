from sys import stdin
input = stdin.readline

def rotate(arr):
    new_arr = [[''] * 3 for _ in range(3)]
    for i in range(3):
        for j in range(3):
            new_arr[i][j] = arr[2 - j][i]
    return new_arr

t = int(input())
for _ in range(t):
    u = [['w'] * 3 for _ in range(3)]
    d = [['y'] * 3 for _ in range(3)]
    f = [['r'] * 3 for _ in range(3)]
    b = [['o'] * 3 for _ in range(3)]
    l = [['g'] * 3 for _ in range(3)]
    r = [['b'] * 3 for _ in range(3)]

    n = int(input())
    inp = list(input().split())
    for i in range(n):
        if inp[i][0] == 'U':
            if inp[i][1] == '+':
                f[0][0], f[0][1], f[0][2], l[0][0], l[0][1], l[0][2], b[2][2], b[2][1], b[2][0], r[0][0], r[0][1], r[0][
                    2] = r[0][0], r[0][1], r[0][2], f[0][0], f[0][1], f[0][2], l[0][0], l[0][1], l[0][2], b[2][2], b[2][
                    1], b[2][0]
                u = rotate(u)
            else:
                f[0][0], f[0][1], f[0][2], l[0][0], l[0][1], l[0][2], b[2][2], b[2][1], b[2][0], r[0][0], r[0][1], r[0][
                    2] = l[0][0], l[0][1], l[0][2], b[2][2], b[2][1], b[2][0], r[0][0], r[0][1], r[0][2], f[0][0], f[0][
                    1], f[0][2]
                for _ in range(3):
                    u = rotate(u)
        elif inp[i][0] == 'D':
            if inp[i][1] == '+':
                b[0][0], b[0][1], b[0][2], l[2][2], l[2][1], l[2][0], f[2][2], f[2][1], f[2][0], r[2][2], r[2][1], r[2][
                    0] = r[2][2], r[2][1], r[2][0], b[0][0], b[0][1], b[0][2], l[2][2], l[2][1], l[2][0], f[2][2], f[2][
                    1], f[2][0]
                d = rotate(d)
            else:
                b[0][0], b[0][1], b[0][2], l[2][2], l[2][1], l[2][0], f[2][2], f[2][1], f[2][0], r[2][2], r[2][1], r[2][
                    0] = l[2][2], l[2][1], l[2][0], f[2][2], f[2][1], f[2][0], r[2][2], r[2][1], r[2][0], b[0][0], b[0][
                    1], b[0][2]
                for _ in range(3):
                    d = rotate(d)
        elif inp[i][0] == 'F':
            if inp[i][1] == '+':
                d[0][0], d[0][1], d[0][2], l[0][2], l[1][2], l[2][2], u[2][2], u[2][1], u[2][0], r[2][0], r[1][0], r[0][
                    0] = r[2][0], r[1][0], r[0][0], d[0][0], d[0][1], d[0][2], l[0][2], l[1][2], l[2][2], u[2][2], u[2][
                    1], u[2][0]
                f = rotate(f)
            else:
                d[0][0], d[0][1], d[0][2], l[0][2], l[1][2], l[2][2], u[2][2], u[2][1], u[2][0], r[2][0], r[1][0], r[0][
                    0] = l[0][2], l[1][2], l[2][2], u[2][2], u[2][1], u[2][0], r[2][0], r[1][0], r[0][0], d[0][0], d[0][
                    1], d[0][2]
                for _ in range(3):
                    f = rotate(f)
        elif inp[i][0] == 'B':
            if inp[i][1] == '+':
                u[0][0], u[0][1], u[0][2], l[2][0], l[1][0], l[0][0], d[2][2], d[2][1], d[2][0], r[0][2], r[1][2], r[2][
                    2] = r[0][2], r[1][2], r[2][2], u[0][0], u[0][1], u[0][2], l[2][0], l[1][0], l[0][0], d[2][2], d[2][
                    1], d[2][0]
                b = rotate(b)
            else:
                u[0][0], u[0][1], u[0][2], l[2][0], l[1][0], l[0][0], d[2][2], d[2][1], d[2][0], r[0][2], r[1][2], r[2][
                    2] = l[2][0], l[1][0], l[0][0], d[2][2], d[2][1], d[2][0], r[0][2], r[1][2], r[2][2], u[0][0], u[0][
                    1], u[0][2]
                for _ in range(3):
                    b = rotate(b)
        elif inp[i][0] == 'L':
            if inp[i][1] == '+':
                d[2][0], d[1][0], d[0][0], b[2][0], b[1][0], b[0][0], u[2][0], u[1][0], u[0][0], f[2][0], f[1][0], f[0][
                    0] = f[2][0], f[1][0], f[0][0], d[2][0], d[1][0], d[0][0], b[2][0], b[1][0], b[0][0], u[2][0], u[1][
                    0], u[0][0]
                l = rotate(l)
            else:
                d[2][0], d[1][0], d[0][0], b[2][0], b[1][0], b[0][0], u[2][0], u[1][0], u[0][0], f[2][0], f[1][0], f[0][
                    0] = b[2][0], b[1][0], b[0][0], u[2][0], u[1][0], u[0][0], f[2][0], f[1][0], f[0][0], d[2][0], d[1][
                    0], d[0][0]
                for _ in range(3):
                    l = rotate(l)
        else:
            if inp[i][1] == '+':
                d[0][2], d[1][2], d[2][2], f[0][2], f[1][2], f[2][2], u[0][2], u[1][2], u[2][2], b[0][2], b[1][2], b[2][
                    2] = b[0][2], b[1][2], b[2][2], d[0][2], d[1][2], d[2][2], f[0][2], f[1][2], f[2][2], u[0][2], u[1][
                    2], u[2][2]
                r = rotate(r)
            else:
                d[0][2], d[1][2], d[2][2], f[0][2], f[1][2], f[2][2], u[0][2], u[1][2], u[2][2], b[0][2], b[1][2], b[2][
                    2] = f[0][2], f[1][2], f[2][2], u[0][2], u[1][2], u[2][2], b[0][2], b[1][2], b[2][2], d[0][2], d[1][
                    2], d[2][2]
                for _ in range(3):
                    r = rotate(r)

    for ans in u:
        print(''.join(ans))